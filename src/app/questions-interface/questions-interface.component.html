
<div class="container my-4">
  <div class="border border-light p-3 mb-4">
    <div class="d-flex align-items-center flex-column justify-content-center h-100">
      <form novalidate [formGroup]="QuestionForm" 
      (ngSubmit)="onSubmit()" #qform="ngForm">
            <table class="form-size">

              <div class="container">

                <div class="row text-center d-flex justify-content-between pt-5 mb-3">
            
                  <div class="col-md-2 mb-3 font-weight-bold">
                    <p> 
                      <td >
                        <label>Question# {{questionOrdre+1 }} </label>

                        <mat-form-field class="form-group">

                          <textarea matInput formControlName="question" 
                          placeholder="Question" [(ngModel)]="question.quText"  rows="10">  
                          </textarea>
                          <mat-error *ngIf="formErrors.question" > {{formErrors.question}} </mat-error>
                          <mat-error *ngIf="QuestionForm.get('question').touched &&!formErrors.question" >Une question est obligatoire</mat-error>
                        </mat-form-field>
                      </td>
                    </p>
                  </div>
            
                  <div class="col-md-2 mb-3">
                    <p>
                      <td >
                        <mat-form-field class="form-group">
                          <input  required matInput formControlName="chapitre" 
                          [matAutocomplete]="auto" [(ngModel)]="question.quChCode"
                          placeholder="Chapitre" type="text">
                          <mat-error *ngIf="formErrors.chapitre" > {{formErrors.chapitre}} </mat-error>
                          <mat-error *ngIf="QuestionForm.get('chapitre').touched &&!formErrors.chapitre" >Un chapitre est obligatoire</mat-error>
                          <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let chapter of chapters"
                             [value]="chapter">
                              {{chapter.chNom}}
                           </mat-option>
   
                       </mat-autocomplete>
                        </mat-form-field>
                      </td>
                    </p>
                  </div>
             
                  <div class="col-md-2 mb-3">
                    <p>
                      <td >
                        <mat-form-field class="form-group">
                          <textarea matInput formControlName="explication" 
                          placeholder="Explication"  rows="10">  
                          </textarea>
                          <mat-error *ngIf="formErrors.explication" > {{formErrors.explication}} </mat-error>
                          <mat-error *ngIf="QuestionForm.get('explication').touched &&!formErrors.explication" >Une explication est obligatoire</mat-error>
                        </mat-form-field>
                      </td>
                    </p>
                  </div>
            
                </div>
              </div>
              
              <div class="container" >
                <div class="row text-center d-flex justify-content-between pt-5 mb-3">
                  <div class="row" formArrayName="reponses">
                    <div  *ngFor="let item of reponses.controls;
                    let ReponseIndex=index" [formGroupName]="ReponseIndex">

                    <h6 class="row font-weight-bold">
                      <label for="">Réponse {{ReponseIndex +1 }} </label>
                      <mat-form-field class="form-group">
                        <input [(ngModel)]="choix.chCorrect" formControlName="reponseCorrecte" type="checkbox" name="Rep1"  > 
                        <textarea required matInput 
                        [(ngModel)]="choix.chText" 
                        formControlName="enonce" 
                         rows="5">  
                        </textarea>   
                      </mat-form-field>
                      </h6>

                    </div>
                  </div>
                </div>
              </div>

              

              <div class="container">

                <div class="row text-center d-flex justify-content-between pt-5 mb-3">
            
                  <div class="col-md-2 mb-3">
                          <button type="button"  
                          mat-button class="btn btn-lg  
                          btn-block btn-success " (click)="onSubmitExam()"
                          [disabled]="QuestionForm.invalid">Valider examen
                        </button>
                  </div>
            
            
                  <div class="col-md-2 mb-3">
                        <button type="button"
                         mat-button class="btn btn-lg  btn-block btn-danger " 
                        onclick="reset()" >Reset question
                        </button> 
                  </div>

                  <div class="col-md-2 mb-3">
                    <button (click)="ajoutReponse()" 
                    type="button" mat-button class="btn btn-lg  btn-block btn-primary " >Ajout réponse
                    </button> 
                  </div>
             
                  <div class="col-md-2 mb-3">
                    <button type="button" mat-button 
                    (click)="supprimerReponse(ReponseIndex+1)"
                    class="btn btn-lg btn-block btn-danger " >Supprimer réponse
                    </button> 
                  </div>

                  <div class="col-md-2 mb-3">

                    <button type="submit" mat-button 
                    class="btn btn-lg btn-block btn-success " 
                    [disabled]="QuestionForm.invalid" >Ajout question
                    </button> 
              </div>
                </div>
              </div>
            </table>
      </form>
    </div>
  </div>
</div>